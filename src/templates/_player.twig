{% set playlistUrl = playlistUrl ?? (asset.streamingVideo.hlsPlaylistUrl ?? null) %}
{% set videoId = id ?? 'hls-video' %}
{% if playlistUrl %}
  <video id="{{ videoId }}" controls style="width:100%;max-width:800px;">
    <source src="{{ playlistUrl }}" type="application/vnd.apple.mpegurl">
    Your browser does not support the video tag.
  </video>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script>
    (function() {
      var video = document.getElementById('{{ videoId }}');
      if (video.canPlayType('application/vnd.apple.mpegurl')) {
        video.src = "{{ playlistUrl }}";
        console.log('playing live')
      } else if (window.Hls) {
        var hls = new Hls();
        hls.loadSource("{{ playlistUrl }}");
        hls.attachMedia(video);
        console.log('Loaded HLS.js')
      }
    })();
  </script>
{% else %}
  <p>No HLS playlist available.</p>
{% endif %} 
